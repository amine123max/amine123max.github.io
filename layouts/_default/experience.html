{{- define "main" }}

<div class="experience-page">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
  </header>

  <!-- Campus Experience Section -->
  {{ if .Site.Params.campusExperience }}
  <section class="experience-section">
    <h2 class="section-title">
      <span data-lang="en">Campus Experience</span>
      <span data-lang="zh">校园经历</span>
    </h2>
    
    <div class="experience-list">
      {{ range .Site.Params.campusExperience }}
      <div class="experience-item">
        <div class="exp-header">
          <div class="exp-title">
            <h3>
              <span data-lang="en">{{ .title }}</span>
              <span data-lang="zh">{{ .titleZh | default .title }}</span>
            </h3>
            <p class="exp-role">
              <span data-lang="en">{{ .role }}</span>
              <span data-lang="zh">{{ .roleZh | default .role }}</span>
            </p>
          </div>
          <div class="exp-period">{{ .period }}</div>
        </div>
        <div class="exp-description">
          <p data-lang="en">{{ .description }}</p>
          <p data-lang="zh">{{ .descriptionZh | default .description }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}

  <!-- Internship Experience Section -->
  {{ if .Site.Params.internshipExperience }}
  <section class="experience-section">
    <h2 class="section-title">
      <span data-lang="en">Internship Experience</span>
      <span data-lang="zh">实习经历</span>
    </h2>
    
    <div class="experience-list">
      {{ range .Site.Params.internshipExperience }}
      <div class="experience-item">
        <div class="exp-header">
          <div class="exp-title">
            <h3>
              {{ if .companyUrl }}
              <a href="{{ .companyUrl }}" target="_blank" rel="noopener noreferrer" class="company-link">
                <span data-lang="en">{{ .company }}</span>
                <span data-lang="zh">{{ .companyZh | default .company }}</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon">
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                  <polyline points="15 3 21 3 21 9"></polyline>
                  <line x1="10" y1="14" x2="21" y2="3"></line>
                </svg>
              </a>
              {{ else }}
              <span data-lang="en">{{ .company }}</span>
              <span data-lang="zh">{{ .companyZh | default .company }}</span>
              {{ end }}
            </h3>
            <p class="exp-role">
              <span data-lang="en">{{ .role }}{{ if .location }} - {{ .location }}{{ end }}</span>
              <span data-lang="zh">{{ .roleZh | default .role }}{{ if .locationZh }} - {{ .locationZh }}{{ end }}</span>
            </p>
          </div>
          <div class="exp-period">{{ .period }}</div>
        </div>
        <div class="exp-description">
          <p data-lang="en">{{ .description }}</p>
          <p data-lang="zh">{{ .descriptionZh | default .description }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}
</div>

<style>
.experience-section {
  margin-bottom: 3rem;
}

.section-title {
  font-size: 1.75rem;
  font-weight: 700;
  margin-bottom: 2rem;
  color: var(--primary);
  border-left: 4px solid var(--theme);
  padding-left: 1rem;
}

.experience-list {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.experience-item {
  background: var(--entry);
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.experience-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.exp-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1rem;
  gap: 1rem;
}

.exp-title h3 {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.company-link {
  color: #0066cc;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  transition: color 0.2s ease;
}

.company-link:hover {
  color: #0052a3;
}

body.dark .company-link {
  color: #4da6ff;
}

body.dark .company-link:hover {
  color: #66b3ff;
}

.external-link-icon {
  opacity: 0.6;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.company-link:hover .external-link-icon {
  opacity: 1;
  transform: translateX(2px) translateY(-2px);
}

.exp-role {
  font-size: 1rem;
  color: var(--secondary);
  font-weight: 500;
}

.exp-period {
  font-size: 0.875rem;
  color: var(--secondary);
  white-space: nowrap;
  background: var(--code-bg);
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
}

.exp-description {
  line-height: 1.8;
  color: var(--content);
}

.exp-description p {
  margin: 0;
  white-space: pre-line;
}

.exp-description ul {
  list-style: none;
  padding: 0;
  margin: 0.5rem 0 0 0;
}

.exp-description li {
  padding-left: 1.5rem;
  position: relative;
  margin-bottom: 0.5rem;
}

.exp-description li:before {
  content: "•";
  position: absolute;
  left: 0.5rem;
  color: var(--theme);
  font-weight: bold;
}

/* Dark mode support */
body.dark .experience-item {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

body.dark .experience-item:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
}

/* Responsive */
@media (max-width: 768px) {
  .exp-header {
    flex-direction: column;
  }
  
  .exp-period {
    align-self: flex-start;
  }
  
  .section-title {
    font-size: 1.5rem;
  }
}
</style>

{{- end }}
