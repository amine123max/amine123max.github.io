{{- define "main" }}

<div class="experience-page">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
  </header>

  <!-- Campus Experience Section -->
  {{ if .Site.Params.campusExperience }}
  <section class="experience-section">
    <h2 class="section-title">
      <span data-lang="en">Campus Experience</span>
      <span data-lang="zh">校园经历</span>
    </h2>
    
    <div class="experience-list">
      {{ range .Site.Params.campusExperience }}
      <div class="experience-item">
        <div class="exp-header">
          <div class="exp-title">
            <h3>
              <span data-lang="en">{{ .title }}</span>
              <span data-lang="zh">{{ .titleZh | default .title }}</span>
            </h3>
            <p class="exp-role">
              <span data-lang="en">{{ .role }}</span>
              <span data-lang="zh">{{ .roleZh | default .role }}</span>
            </p>
          </div>
          <div class="exp-period">{{ .period }}</div>
        </div>
        <div class="exp-description">
          <p data-lang="en">{{ .description }}</p>
          <p data-lang="zh">{{ .descriptionZh | default .description }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}

  <!-- Internship Experience Section -->
  {{ if .Site.Params.internshipExperience }}
  <section class="experience-section">
    <h2 class="section-title">
      <span data-lang="en">Internship Experience</span>
      <span data-lang="zh">实习经历</span>
    </h2>
    
    <div class="experience-list">
      {{ range .Site.Params.internshipExperience }}
      <div class="experience-item">
        <div class="exp-header">
          <div class="exp-title">
            <h3>
              {{ if .companyUrl }}
              <a href="{{ .companyUrl }}" target="_blank" rel="noopener noreferrer" class="company-link">
                <span data-lang="en">{{ .company }}</span>
                <span data-lang="zh">{{ .companyZh | default .company }}</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon">
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                  <polyline points="15 3 21 3 21 9"></polyline>
                  <line x1="10" y1="14" x2="21" y2="3"></line>
                </svg>
              </a>
              {{ else }}
              <span data-lang="en">{{ .company }}</span>
              <span data-lang="zh">{{ .companyZh | default .company }}</span>
              {{ end }}
            </h3>
            <p class="exp-role">
              <span data-lang="en">{{ .role }}{{ if .location }} - {{ .location }}{{ end }}</span>
              <span data-lang="zh">{{ .roleZh | default .role }}{{ if .locationZh }} - {{ .locationZh }}{{ end }}</span>
            </p>
          </div>
          <div class="exp-period">{{ .period }}</div>
        </div>
        <div class="exp-description">
          <p data-lang="en">{{ .description }}</p>
          <p data-lang="zh">{{ .descriptionZh | default .description }}</p>
        </div>
      </div>
      {{ end }}
    </div>
  </section>
  {{ end }}
</div>

{{- end }}

{{- define "footer" }}
{{- partial "footer.html" . }}

{{- /* 确保语言切换脚本加载 */ -}}
{{ $langSwitch := resources.Get "js/lang-switch.js" }}
{{ if $langSwitch }}
  {{ $langSwitch := $langSwitch | minify | fingerprint }}
  <script src="{{ $langSwitch.RelPermalink }}" integrity="{{ $langSwitch.Data.Integrity }}"></script>
{{ end }}
{{- end }}
