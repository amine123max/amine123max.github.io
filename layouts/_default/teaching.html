{{- define "main" }}

<div class="teaching-page" data-page-type="teaching">
  <header class="page-header">
    <h1>
      <span data-lang="en">Teaching</span>
      <span data-lang="zh">教学工作</span>
    </h1>
    <p class="page-description">
      <span data-lang="en">Courses and educational contributions</span>
      <span data-lang="zh">课程教学与教育贡献</span>
    </p>
  </header>

  <div class="teaching-grid">
    {{ range .Site.Params.teaching }}
    <article class="course-card">
      <div class="course-header">
        <div class="course-title-section">
          <h2 class="course-title">
            <span data-lang="en">{{ .title }}</span>
            <span data-lang="zh">{{ .titleZh | default .title }}</span>
          </h2>
          {{ if .code }}
          <span class="course-code">{{ .code }}</span>
          {{ end }}
          {{ if .role }}
          <p class="course-role">
            <span data-lang="en">{{ .role }}</span>
            <span data-lang="zh">{{ .roleZh | default .role }}</span>
          </p>
          {{ end }}
        </div>
        {{ if .semester }}
        <div class="course-semester">{{ .semester }}</div>
        {{ end }}
      </div>
      
      {{ if .description }}
      <div class="course-description">
        <p data-lang="en">{{ .description }}</p>
        <p data-lang="zh">{{ .descriptionZh | default .description }}</p>
      </div>
      {{ end }}
      
      {{ if .topics }}
      <div class="course-topics">
        {{ range .topics }}
        <span class="course-topic">{{ . }}</span>
        {{ end }}
      </div>
      {{ end }}
      
      {{ if or .syllabusUrl .materialsUrl .websiteUrl }}
      <div class="course-links">
        {{ if .syllabusUrl }}
        <a href="{{ .syllabusUrl }}" class="course-link" target="_blank" rel="noopener noreferrer">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
          <span data-lang="en">Syllabus</span>
          <span data-lang="zh">教学大纲</span>
        </a>
        {{ end }}
        {{ if .materialsUrl }}
        <a href="{{ .materialsUrl }}" class="course-link" target="_blank" rel="noopener noreferrer">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
          <span data-lang="en">Materials</span>
          <span data-lang="zh">教学资料</span>
        </a>
        {{ end }}
        {{ if .websiteUrl }}
        <a href="{{ .websiteUrl }}" class="course-link" target="_blank" rel="noopener noreferrer">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" y1="12" x2="22" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
          </svg>
          <span data-lang="en">Website</span>
          <span data-lang="zh">课程网站</span>
        </a>
        {{ end }}
      </div>
      {{ end }}
    </article>
    {{ end }}
  </div>
</div>

{{- end }}

{{- define "footer" }}
{{- partial "footer.html" . }}

{{- /* 确保语言切换脚本加载 */ -}}
{{ $langSwitch := resources.Get "js/lang-switch.js" }}
{{ if $langSwitch }}
  {{ $langSwitch := $langSwitch | minify | fingerprint }}
  <script src="{{ $langSwitch.RelPermalink }}" integrity="{{ $langSwitch.Data.Integrity }}"></script>
{{ end }}
{{- end }}
